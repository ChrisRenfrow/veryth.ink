---
import FormattedDate from '@components/FormattedDate.astro'
import type { CollectionEntry } from 'astro:content'

interface Props {
  posts: CollectionEntry<'blog'>[]
  baseUrl?: string
}

const { posts, baseUrl = '/blog' } = Astro.props
---

<ul class="flex flex-col gap-4">
  {
    posts.map((post) => (
      <li class="min-h-16 flex flex-row gap-2">
        <div class="flex flex-col min-w-24">
          <FormattedDate class="pt-1" date={post.data.published_on} />
          {post.data.category && (
          <span>
            <a class="underline decoration-orange-900 decoration-2 hover:bg-stone-600 hover:text-stone-200 hover:no-underline dark:text-stone-300" href=`/categories/${post.data.category}`>
              /{post.data.category}
            </a>
          </span>
          )}
        </div>
        <div class="flex flex-col">
          <h3 class="text-lg underline decoration-2 decoration-orange-600 lowercase">
            <a
              class="hover:bg-orange-600 hover:text-stone-800"
              href={`${baseUrl}/${post.slug}`}
            >
              {post.data.title}
            </a>
          </h3>
          <p class="line-clamp-2 text-ellipsis text-stone-500 dark:text-stone-300">
            {post.data.description}
          </p>
        </div>
      </li>
    ))
  }
</ul>
